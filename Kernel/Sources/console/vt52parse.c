//
//  vt52parse.c
//  kernel
//
//  Created by Dietmar Planitzer on 1/6/24.
//  Copyright Â© 2024 Dietmar Planitzer. All rights reserved.
//

#include "vt52parse.h"

#define ACTION(state_change) (state_change & 0x0F)
#define STATE(state_change)  (state_change >> 4)


static const vt52_state_change_t VT52_STATE_TABLE[3][256] = {
    {  /* VT52PARSE_STATE_GROUND = 1 */
/*0  */  VT52PARSE_ACTION_IGNORE             | (VT52PARSE_STATE_GROUND            << 4),
/*1  */  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*2  */  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*3  */  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*4  */  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*5  */  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*6  */  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*7  */  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*8  */  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*9  */  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*10 */  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*11 */  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*12 */  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*13 */  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*14 */  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*15 */  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*16 */  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*17 */  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*18 */  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*19 */  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*20 */  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*21 */  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*22 */  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*23 */  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*24 */  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*25 */  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*26 */  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*27 */  VT52PARSE_ACTION_ESC_START          | (VT52PARSE_STATE_ESCAPE            << 4),
/*28 */  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*29 */  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*30 */  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*31 */  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*32 */  VT52PARSE_ACTION_PRINT              | (VT52PARSE_STATE_GROUND            << 4),
/*33 */  VT52PARSE_ACTION_PRINT              | (VT52PARSE_STATE_GROUND            << 4),
/*34 */  VT52PARSE_ACTION_PRINT              | (VT52PARSE_STATE_GROUND            << 4),
/*35 */  VT52PARSE_ACTION_PRINT              | (VT52PARSE_STATE_GROUND            << 4),
/*36 */  VT52PARSE_ACTION_PRINT              | (VT52PARSE_STATE_GROUND            << 4),
/*37 */  VT52PARSE_ACTION_PRINT              | (VT52PARSE_STATE_GROUND            << 4),
/*38 */  VT52PARSE_ACTION_PRINT              | (VT52PARSE_STATE_GROUND            << 4),
/*39 */  VT52PARSE_ACTION_PRINT              | (VT52PARSE_STATE_GROUND            << 4),
/*40 */  VT52PARSE_ACTION_PRINT              | (VT52PARSE_STATE_GROUND            << 4),
/*41 */  VT52PARSE_ACTION_PRINT              | (VT52PARSE_STATE_GROUND            << 4),
/*42 */  VT52PARSE_ACTION_PRINT              | (VT52PARSE_STATE_GROUND            << 4),
/*43 */  VT52PARSE_ACTION_PRINT              | (VT52PARSE_STATE_GROUND            << 4),
/*44 */  VT52PARSE_ACTION_PRINT              | (VT52PARSE_STATE_GROUND            << 4),
/*45 */  VT52PARSE_ACTION_PRINT              | (VT52PARSE_STATE_GROUND            << 4),
/*46 */  VT52PARSE_ACTION_PRINT              | (VT52PARSE_STATE_GROUND            << 4),
/*47 */  VT52PARSE_ACTION_PRINT              | (VT52PARSE_STATE_GROUND            << 4),
/*48 */  VT52PARSE_ACTION_PRINT              | (VT52PARSE_STATE_GROUND            << 4),
/*49 */  VT52PARSE_ACTION_PRINT              | (VT52PARSE_STATE_GROUND            << 4),
/*50 */  VT52PARSE_ACTION_PRINT              | (VT52PARSE_STATE_GROUND            << 4),
/*51 */  VT52PARSE_ACTION_PRINT              | (VT52PARSE_STATE_GROUND            << 4),
/*52 */  VT52PARSE_ACTION_PRINT              | (VT52PARSE_STATE_GROUND            << 4),
/*53 */  VT52PARSE_ACTION_PRINT              | (VT52PARSE_STATE_GROUND            << 4),
/*54 */  VT52PARSE_ACTION_PRINT              | (VT52PARSE_STATE_GROUND            << 4),
/*55 */  VT52PARSE_ACTION_PRINT              | (VT52PARSE_STATE_GROUND            << 4),
/*56 */  VT52PARSE_ACTION_PRINT              | (VT52PARSE_STATE_GROUND            << 4),
/*57 */  VT52PARSE_ACTION_PRINT              | (VT52PARSE_STATE_GROUND            << 4),
/*58 */  VT52PARSE_ACTION_PRINT              | (VT52PARSE_STATE_GROUND            << 4),
/*59 */  VT52PARSE_ACTION_PRINT              | (VT52PARSE_STATE_GROUND            << 4),
/*60 */  VT52PARSE_ACTION_PRINT              | (VT52PARSE_STATE_GROUND            << 4),
/*61 */  VT52PARSE_ACTION_PRINT              | (VT52PARSE_STATE_GROUND            << 4),
/*62 */  VT52PARSE_ACTION_PRINT              | (VT52PARSE_STATE_GROUND            << 4),
/*63 */  VT52PARSE_ACTION_PRINT              | (VT52PARSE_STATE_GROUND            << 4),
/*64 */  VT52PARSE_ACTION_PRINT              | (VT52PARSE_STATE_GROUND            << 4),
/*65 */  VT52PARSE_ACTION_PRINT              | (VT52PARSE_STATE_GROUND            << 4),
/*66 */  VT52PARSE_ACTION_PRINT              | (VT52PARSE_STATE_GROUND            << 4),
/*67 */  VT52PARSE_ACTION_PRINT              | (VT52PARSE_STATE_GROUND            << 4),
/*68 */  VT52PARSE_ACTION_PRINT              | (VT52PARSE_STATE_GROUND            << 4),
/*69 */  VT52PARSE_ACTION_PRINT              | (VT52PARSE_STATE_GROUND            << 4),
/*70 */  VT52PARSE_ACTION_PRINT              | (VT52PARSE_STATE_GROUND            << 4),
/*71 */  VT52PARSE_ACTION_PRINT              | (VT52PARSE_STATE_GROUND            << 4),
/*72 */  VT52PARSE_ACTION_PRINT              | (VT52PARSE_STATE_GROUND            << 4),
/*73 */  VT52PARSE_ACTION_PRINT              | (VT52PARSE_STATE_GROUND            << 4),
/*74 */  VT52PARSE_ACTION_PRINT              | (VT52PARSE_STATE_GROUND            << 4),
/*75 */  VT52PARSE_ACTION_PRINT              | (VT52PARSE_STATE_GROUND            << 4),
/*76 */  VT52PARSE_ACTION_PRINT              | (VT52PARSE_STATE_GROUND            << 4),
/*77 */  VT52PARSE_ACTION_PRINT              | (VT52PARSE_STATE_GROUND            << 4),
/*78 */  VT52PARSE_ACTION_PRINT              | (VT52PARSE_STATE_GROUND            << 4),
/*79 */  VT52PARSE_ACTION_PRINT              | (VT52PARSE_STATE_GROUND            << 4),
/*80 */  VT52PARSE_ACTION_PRINT              | (VT52PARSE_STATE_GROUND            << 4),
/*81 */  VT52PARSE_ACTION_PRINT              | (VT52PARSE_STATE_GROUND            << 4),
/*82 */  VT52PARSE_ACTION_PRINT              | (VT52PARSE_STATE_GROUND            << 4),
/*83 */  VT52PARSE_ACTION_PRINT              | (VT52PARSE_STATE_GROUND            << 4),
/*84 */  VT52PARSE_ACTION_PRINT              | (VT52PARSE_STATE_GROUND            << 4),
/*85 */  VT52PARSE_ACTION_PRINT              | (VT52PARSE_STATE_GROUND            << 4),
/*86 */  VT52PARSE_ACTION_PRINT              | (VT52PARSE_STATE_GROUND            << 4),
/*87 */  VT52PARSE_ACTION_PRINT              | (VT52PARSE_STATE_GROUND            << 4),
/*88 */  VT52PARSE_ACTION_PRINT              | (VT52PARSE_STATE_GROUND            << 4),
/*89 */  VT52PARSE_ACTION_PRINT              | (VT52PARSE_STATE_GROUND            << 4),
/*90 */  VT52PARSE_ACTION_PRINT              | (VT52PARSE_STATE_GROUND            << 4),
/*91 */  VT52PARSE_ACTION_PRINT              | (VT52PARSE_STATE_GROUND            << 4),
/*92 */  VT52PARSE_ACTION_PRINT              | (VT52PARSE_STATE_GROUND            << 4),
/*93 */  VT52PARSE_ACTION_PRINT              | (VT52PARSE_STATE_GROUND            << 4),
/*94 */  VT52PARSE_ACTION_PRINT              | (VT52PARSE_STATE_GROUND            << 4),
/*95 */  VT52PARSE_ACTION_PRINT              | (VT52PARSE_STATE_GROUND            << 4),
/*96 */  VT52PARSE_ACTION_PRINT              | (VT52PARSE_STATE_GROUND            << 4),
/*97 */  VT52PARSE_ACTION_PRINT              | (VT52PARSE_STATE_GROUND            << 4),
/*98 */  VT52PARSE_ACTION_PRINT              | (VT52PARSE_STATE_GROUND            << 4),
/*99 */  VT52PARSE_ACTION_PRINT              | (VT52PARSE_STATE_GROUND            << 4),
/*100*/  VT52PARSE_ACTION_PRINT              | (VT52PARSE_STATE_GROUND            << 4),
/*101*/  VT52PARSE_ACTION_PRINT              | (VT52PARSE_STATE_GROUND            << 4),
/*102*/  VT52PARSE_ACTION_PRINT              | (VT52PARSE_STATE_GROUND            << 4),
/*103*/  VT52PARSE_ACTION_PRINT              | (VT52PARSE_STATE_GROUND            << 4),
/*104*/  VT52PARSE_ACTION_PRINT              | (VT52PARSE_STATE_GROUND            << 4),
/*105*/  VT52PARSE_ACTION_PRINT              | (VT52PARSE_STATE_GROUND            << 4),
/*106*/  VT52PARSE_ACTION_PRINT              | (VT52PARSE_STATE_GROUND            << 4),
/*107*/  VT52PARSE_ACTION_PRINT              | (VT52PARSE_STATE_GROUND            << 4),
/*108*/  VT52PARSE_ACTION_PRINT              | (VT52PARSE_STATE_GROUND            << 4),
/*109*/  VT52PARSE_ACTION_PRINT              | (VT52PARSE_STATE_GROUND            << 4),
/*110*/  VT52PARSE_ACTION_PRINT              | (VT52PARSE_STATE_GROUND            << 4),
/*111*/  VT52PARSE_ACTION_PRINT              | (VT52PARSE_STATE_GROUND            << 4),
/*112*/  VT52PARSE_ACTION_PRINT              | (VT52PARSE_STATE_GROUND            << 4),
/*113*/  VT52PARSE_ACTION_PRINT              | (VT52PARSE_STATE_GROUND            << 4),
/*114*/  VT52PARSE_ACTION_PRINT              | (VT52PARSE_STATE_GROUND            << 4),
/*115*/  VT52PARSE_ACTION_PRINT              | (VT52PARSE_STATE_GROUND            << 4),
/*116*/  VT52PARSE_ACTION_PRINT              | (VT52PARSE_STATE_GROUND            << 4),
/*117*/  VT52PARSE_ACTION_PRINT              | (VT52PARSE_STATE_GROUND            << 4),
/*118*/  VT52PARSE_ACTION_PRINT              | (VT52PARSE_STATE_GROUND            << 4),
/*119*/  VT52PARSE_ACTION_PRINT              | (VT52PARSE_STATE_GROUND            << 4),
/*120*/  VT52PARSE_ACTION_PRINT              | (VT52PARSE_STATE_GROUND            << 4),
/*121*/  VT52PARSE_ACTION_PRINT              | (VT52PARSE_STATE_GROUND            << 4),
/*122*/  VT52PARSE_ACTION_PRINT              | (VT52PARSE_STATE_GROUND            << 4),
/*123*/  VT52PARSE_ACTION_PRINT              | (VT52PARSE_STATE_GROUND            << 4),
/*124*/  VT52PARSE_ACTION_PRINT              | (VT52PARSE_STATE_GROUND            << 4),
/*125*/  VT52PARSE_ACTION_PRINT              | (VT52PARSE_STATE_GROUND            << 4),
/*126*/  VT52PARSE_ACTION_PRINT              | (VT52PARSE_STATE_GROUND            << 4),
/*127*/  VT52PARSE_ACTION_PRINT              | (VT52PARSE_STATE_GROUND            << 4),
/*128*/  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*129*/  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*130*/  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*131*/  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*132*/  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*133*/  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*134*/  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*135*/  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*136*/  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*137*/  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*138*/  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*139*/  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*140*/  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*141*/  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*142*/  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*143*/  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*144*/  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*145*/  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*146*/  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*147*/  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*148*/  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*149*/  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*150*/  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*151*/  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*152*/  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*153*/  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*154*/  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*155*/  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*156*/  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*157*/  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*158*/  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*159*/  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
  },
  {  /* VT52PARSE_STATE_ESCAPE = 2 */
/*0  */  VT52PARSE_ACTION_IGNORE             | (VT52PARSE_STATE_ESCAPE            << 4),
/*1  */  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*2  */  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*3  */  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*4  */  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*5  */  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*6  */  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*7  */  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*8  */  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*9  */  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*10 */  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*11 */  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*12 */  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*13 */  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*14 */  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*15 */  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*16 */  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*17 */  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*18 */  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*19 */  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*20 */  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*21 */  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*22 */  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*23 */  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*24 */  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*25 */  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*26 */  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*27 */  VT52PARSE_ACTION_ESC_START          | (VT52PARSE_STATE_ESCAPE            << 4),
/*28 */  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*29 */  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*30 */  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*31 */  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*32 */  VT52PARSE_ACTION_ESC_DISPATCH       | (VT52PARSE_STATE_GROUND            << 4),
/*33 */  VT52PARSE_ACTION_ESC_DISPATCH       | (VT52PARSE_STATE_GROUND            << 4),
/*34 */  VT52PARSE_ACTION_ESC_DISPATCH       | (VT52PARSE_STATE_GROUND            << 4),
/*35 */  VT52PARSE_ACTION_ESC_DISPATCH       | (VT52PARSE_STATE_GROUND            << 4),
/*36 */  VT52PARSE_ACTION_ESC_DISPATCH       | (VT52PARSE_STATE_GROUND            << 4),
/*37 */  VT52PARSE_ACTION_ESC_DISPATCH       | (VT52PARSE_STATE_GROUND            << 4),
/*38 */  VT52PARSE_ACTION_ESC_DISPATCH       | (VT52PARSE_STATE_GROUND            << 4),
/*39 */  VT52PARSE_ACTION_ESC_DISPATCH       | (VT52PARSE_STATE_GROUND            << 4),
/*40 */  VT52PARSE_ACTION_ESC_DISPATCH       | (VT52PARSE_STATE_GROUND            << 4),
/*41 */  VT52PARSE_ACTION_ESC_DISPATCH       | (VT52PARSE_STATE_GROUND            << 4),
/*42 */  VT52PARSE_ACTION_ESC_DISPATCH       | (VT52PARSE_STATE_GROUND            << 4),
/*43 */  VT52PARSE_ACTION_ESC_DISPATCH       | (VT52PARSE_STATE_GROUND            << 4),
/*44 */  VT52PARSE_ACTION_ESC_DISPATCH       | (VT52PARSE_STATE_GROUND            << 4),
/*45 */  VT52PARSE_ACTION_ESC_DISPATCH       | (VT52PARSE_STATE_GROUND            << 4),
/*46 */  VT52PARSE_ACTION_ESC_DISPATCH       | (VT52PARSE_STATE_GROUND            << 4),
/*47 */  VT52PARSE_ACTION_ESC_DISPATCH       | (VT52PARSE_STATE_GROUND            << 4),
/*48 */  VT52PARSE_ACTION_ESC_DISPATCH       | (VT52PARSE_STATE_GROUND            << 4),
/*49 */  VT52PARSE_ACTION_ESC_DISPATCH       | (VT52PARSE_STATE_GROUND            << 4),
/*50 */  VT52PARSE_ACTION_ESC_DISPATCH       | (VT52PARSE_STATE_GROUND            << 4),
/*51 */  VT52PARSE_ACTION_ESC_DISPATCH       | (VT52PARSE_STATE_GROUND            << 4),
/*52 */  VT52PARSE_ACTION_ESC_DISPATCH       | (VT52PARSE_STATE_GROUND            << 4),
/*53 */  VT52PARSE_ACTION_ESC_DISPATCH       | (VT52PARSE_STATE_GROUND            << 4),
/*54 */  VT52PARSE_ACTION_ESC_DISPATCH       | (VT52PARSE_STATE_GROUND            << 4),
/*55 */  VT52PARSE_ACTION_ESC_DISPATCH       | (VT52PARSE_STATE_GROUND            << 4),
/*56 */  VT52PARSE_ACTION_ESC_DISPATCH       | (VT52PARSE_STATE_GROUND            << 4),
/*57 */  VT52PARSE_ACTION_ESC_DISPATCH       | (VT52PARSE_STATE_GROUND            << 4),
/*58 */  VT52PARSE_ACTION_ESC_DISPATCH       | (VT52PARSE_STATE_GROUND            << 4),
/*59 */  VT52PARSE_ACTION_ESC_DISPATCH       | (VT52PARSE_STATE_GROUND            << 4),
/*60 */  VT52PARSE_ACTION_ESC_DISPATCH       | (VT52PARSE_STATE_GROUND            << 4),
/*61 */  VT52PARSE_ACTION_ESC_DISPATCH       | (VT52PARSE_STATE_GROUND            << 4),
/*62 */  VT52PARSE_ACTION_ESC_DISPATCH       | (VT52PARSE_STATE_GROUND            << 4),
/*63 */  VT52PARSE_ACTION_ESC_DISPATCH       | (VT52PARSE_STATE_GROUND            << 4),
/*64 */  VT52PARSE_ACTION_ESC_DISPATCH       | (VT52PARSE_STATE_GROUND            << 4),
/*65 */  VT52PARSE_ACTION_ESC_DISPATCH       | (VT52PARSE_STATE_GROUND            << 4),
/*66 */  VT52PARSE_ACTION_ESC_DISPATCH       | (VT52PARSE_STATE_GROUND            << 4),
/*67 */  VT52PARSE_ACTION_ESC_DISPATCH       | (VT52PARSE_STATE_GROUND            << 4),
/*68 */  VT52PARSE_ACTION_ESC_DISPATCH       | (VT52PARSE_STATE_GROUND            << 4),
/*69 */  VT52PARSE_ACTION_ESC_DISPATCH       | (VT52PARSE_STATE_GROUND            << 4),
/*70 */  VT52PARSE_ACTION_ESC_DISPATCH       | (VT52PARSE_STATE_GROUND            << 4),
/*71 */  VT52PARSE_ACTION_ESC_DISPATCH       | (VT52PARSE_STATE_GROUND            << 4),
/*72 */  VT52PARSE_ACTION_ESC_DISPATCH       | (VT52PARSE_STATE_GROUND            << 4),
/*73 */  VT52PARSE_ACTION_ESC_DISPATCH       | (VT52PARSE_STATE_GROUND            << 4),
/*74 */  VT52PARSE_ACTION_ESC_DISPATCH       | (VT52PARSE_STATE_GROUND            << 4),
/*75 */  VT52PARSE_ACTION_ESC_DISPATCH       | (VT52PARSE_STATE_GROUND            << 4),
/*76 */  VT52PARSE_ACTION_ESC_DISPATCH       | (VT52PARSE_STATE_GROUND            << 4),
/*77 */  VT52PARSE_ACTION_ESC_DISPATCH       | (VT52PARSE_STATE_GROUND            << 4),
/*78 */  VT52PARSE_ACTION_ESC_DISPATCH       | (VT52PARSE_STATE_GROUND            << 4),
/*79 */  VT52PARSE_ACTION_ESC_DISPATCH       | (VT52PARSE_STATE_GROUND            << 4),
/*80 */  VT52PARSE_ACTION_ESC_DISPATCH       | (VT52PARSE_STATE_GROUND            << 4),
/*81 */  VT52PARSE_ACTION_ESC_DISPATCH       | (VT52PARSE_STATE_GROUND            << 4),
/*82 */  VT52PARSE_ACTION_ESC_DISPATCH       | (VT52PARSE_STATE_GROUND            << 4),
/*83 */  VT52PARSE_ACTION_ESC_DISPATCH       | (VT52PARSE_STATE_GROUND            << 4),
/*84 */  VT52PARSE_ACTION_ESC_DISPATCH       | (VT52PARSE_STATE_GROUND            << 4),
/*85 */  VT52PARSE_ACTION_ESC_DISPATCH       | (VT52PARSE_STATE_GROUND            << 4),
/*86 */  VT52PARSE_ACTION_ESC_DISPATCH       | (VT52PARSE_STATE_GROUND            << 4),
/*87 */  VT52PARSE_ACTION_ESC_DISPATCH       | (VT52PARSE_STATE_GROUND            << 4),
/*88 */  VT52PARSE_ACTION_ESC_DISPATCH       | (VT52PARSE_STATE_GROUND            << 4),
/*89 */  VT52PARSE_ACTION_ESC_DELAY_DISPATCH | (VT52PARSE_STATE_COLLECT           << 4),
/*90 */  VT52PARSE_ACTION_ESC_DISPATCH       | (VT52PARSE_STATE_GROUND            << 4),
/*91 */  VT52PARSE_ACTION_ESC_DISPATCH       | (VT52PARSE_STATE_GROUND            << 4),
/*92 */  VT52PARSE_ACTION_ESC_DISPATCH       | (VT52PARSE_STATE_GROUND            << 4),
/*93 */  VT52PARSE_ACTION_ESC_DISPATCH       | (VT52PARSE_STATE_GROUND            << 4),
/*94 */  VT52PARSE_ACTION_ESC_DISPATCH       | (VT52PARSE_STATE_GROUND            << 4),
/*95 */  VT52PARSE_ACTION_ESC_DISPATCH       | (VT52PARSE_STATE_GROUND            << 4),
/*96 */  VT52PARSE_ACTION_ESC_DISPATCH       | (VT52PARSE_STATE_GROUND            << 4),
/*97 */  VT52PARSE_ACTION_ESC_DISPATCH       | (VT52PARSE_STATE_GROUND            << 4),
/*98 */  VT52PARSE_ACTION_ESC_DELAY_DISPATCH | (VT52PARSE_STATE_COLLECT           << 4),
/*99 */  VT52PARSE_ACTION_ESC_DELAY_DISPATCH | (VT52PARSE_STATE_COLLECT           << 4),
/*100*/  VT52PARSE_ACTION_ESC_DISPATCH       | (VT52PARSE_STATE_GROUND            << 4),
/*101*/  VT52PARSE_ACTION_ESC_DISPATCH       | (VT52PARSE_STATE_GROUND            << 4),
/*102*/  VT52PARSE_ACTION_ESC_DISPATCH       | (VT52PARSE_STATE_GROUND            << 4),
/*103*/  VT52PARSE_ACTION_ESC_DISPATCH       | (VT52PARSE_STATE_GROUND            << 4),
/*104*/  VT52PARSE_ACTION_ESC_DISPATCH       | (VT52PARSE_STATE_GROUND            << 4),
/*105*/  VT52PARSE_ACTION_ESC_DISPATCH       | (VT52PARSE_STATE_GROUND            << 4),
/*106*/  VT52PARSE_ACTION_ESC_DISPATCH       | (VT52PARSE_STATE_GROUND            << 4),
/*107*/  VT52PARSE_ACTION_ESC_DISPATCH       | (VT52PARSE_STATE_GROUND            << 4),
/*108*/  VT52PARSE_ACTION_ESC_DISPATCH       | (VT52PARSE_STATE_GROUND            << 4),
/*109*/  VT52PARSE_ACTION_ESC_DISPATCH       | (VT52PARSE_STATE_GROUND            << 4),
/*110*/  VT52PARSE_ACTION_ESC_DISPATCH       | (VT52PARSE_STATE_GROUND            << 4),
/*111*/  VT52PARSE_ACTION_ESC_DISPATCH       | (VT52PARSE_STATE_GROUND            << 4),
/*112*/  VT52PARSE_ACTION_ESC_DISPATCH       | (VT52PARSE_STATE_GROUND            << 4),
/*113*/  VT52PARSE_ACTION_ESC_DISPATCH       | (VT52PARSE_STATE_GROUND            << 4),
/*114*/  VT52PARSE_ACTION_ESC_DISPATCH       | (VT52PARSE_STATE_GROUND            << 4),
/*115*/  VT52PARSE_ACTION_ESC_DISPATCH       | (VT52PARSE_STATE_GROUND            << 4),
/*116*/  VT52PARSE_ACTION_ESC_DISPATCH       | (VT52PARSE_STATE_GROUND            << 4),
/*117*/  VT52PARSE_ACTION_ESC_DISPATCH       | (VT52PARSE_STATE_GROUND            << 4),
/*118*/  VT52PARSE_ACTION_ESC_DISPATCH       | (VT52PARSE_STATE_GROUND            << 4),
/*119*/  VT52PARSE_ACTION_ESC_DISPATCH       | (VT52PARSE_STATE_GROUND            << 4),
/*120*/  VT52PARSE_ACTION_ESC_DISPATCH       | (VT52PARSE_STATE_GROUND            << 4),
/*121*/  VT52PARSE_ACTION_ESC_DISPATCH       | (VT52PARSE_STATE_GROUND            << 4),
/*122*/  VT52PARSE_ACTION_ESC_DISPATCH       | (VT52PARSE_STATE_GROUND            << 4),
/*123*/  VT52PARSE_ACTION_ESC_DISPATCH       | (VT52PARSE_STATE_GROUND            << 4),
/*124*/  VT52PARSE_ACTION_ESC_DISPATCH       | (VT52PARSE_STATE_GROUND            << 4),
/*125*/  VT52PARSE_ACTION_ESC_DISPATCH       | (VT52PARSE_STATE_GROUND            << 4),
/*126*/  VT52PARSE_ACTION_ESC_DISPATCH       | (VT52PARSE_STATE_GROUND            << 4),
/*127*/  VT52PARSE_ACTION_IGNORE             | (VT52PARSE_STATE_ESCAPE            << 4),
/*128*/  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*129*/  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*130*/  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*131*/  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*132*/  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*133*/  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*134*/  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*135*/  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*136*/  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*137*/  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*138*/  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*139*/  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*140*/  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*141*/  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*142*/  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*143*/  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*144*/  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*145*/  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*146*/  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*147*/  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*148*/  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*149*/  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*150*/  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*151*/  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*152*/  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*153*/  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*154*/  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*155*/  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*156*/  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*157*/  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*158*/  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*159*/  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
  },
  {  /* VT52PARSE_STATE_COLLECT = 3 */
/*0  */  VT52PARSE_ACTION_IGNORE             | (VT52PARSE_STATE_COLLECT           << 4),
/*1  */  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*2  */  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*3  */  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*4  */  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*5  */  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*6  */  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*7  */  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*8  */  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*9  */  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*10 */  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*11 */  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*12 */  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*13 */  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*14 */  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*15 */  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*16 */  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*17 */  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*18 */  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*19 */  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*20 */  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*21 */  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*22 */  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*23 */  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*24 */  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*25 */  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*26 */  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*27 */  VT52PARSE_ACTION_ESC_START          | (VT52PARSE_STATE_ESCAPE            << 4),
/*28 */  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*29 */  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*30 */  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*31 */  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*32 */  VT52PARSE_ACTION_COLLECT_BYTE       | (VT52PARSE_STATE_COLLECT           << 4),
/*33 */  VT52PARSE_ACTION_COLLECT_BYTE       | (VT52PARSE_STATE_COLLECT           << 4),
/*34 */  VT52PARSE_ACTION_COLLECT_BYTE       | (VT52PARSE_STATE_COLLECT           << 4),
/*35 */  VT52PARSE_ACTION_COLLECT_BYTE       | (VT52PARSE_STATE_COLLECT           << 4),
/*36 */  VT52PARSE_ACTION_COLLECT_BYTE       | (VT52PARSE_STATE_COLLECT           << 4),
/*37 */  VT52PARSE_ACTION_COLLECT_BYTE       | (VT52PARSE_STATE_COLLECT           << 4),
/*38 */  VT52PARSE_ACTION_COLLECT_BYTE       | (VT52PARSE_STATE_COLLECT           << 4),
/*39 */  VT52PARSE_ACTION_COLLECT_BYTE       | (VT52PARSE_STATE_COLLECT           << 4),
/*40 */  VT52PARSE_ACTION_COLLECT_BYTE       | (VT52PARSE_STATE_COLLECT           << 4),
/*41 */  VT52PARSE_ACTION_COLLECT_BYTE       | (VT52PARSE_STATE_COLLECT           << 4),
/*42 */  VT52PARSE_ACTION_COLLECT_BYTE       | (VT52PARSE_STATE_COLLECT           << 4),
/*43 */  VT52PARSE_ACTION_COLLECT_BYTE       | (VT52PARSE_STATE_COLLECT           << 4),
/*44 */  VT52PARSE_ACTION_COLLECT_BYTE       | (VT52PARSE_STATE_COLLECT           << 4),
/*45 */  VT52PARSE_ACTION_COLLECT_BYTE       | (VT52PARSE_STATE_COLLECT           << 4),
/*46 */  VT52PARSE_ACTION_COLLECT_BYTE       | (VT52PARSE_STATE_COLLECT           << 4),
/*47 */  VT52PARSE_ACTION_COLLECT_BYTE       | (VT52PARSE_STATE_COLLECT           << 4),
/*48 */  VT52PARSE_ACTION_COLLECT_BYTE       | (VT52PARSE_STATE_COLLECT           << 4),
/*49 */  VT52PARSE_ACTION_COLLECT_BYTE       | (VT52PARSE_STATE_COLLECT           << 4),
/*50 */  VT52PARSE_ACTION_COLLECT_BYTE       | (VT52PARSE_STATE_COLLECT           << 4),
/*51 */  VT52PARSE_ACTION_COLLECT_BYTE       | (VT52PARSE_STATE_COLLECT           << 4),
/*52 */  VT52PARSE_ACTION_COLLECT_BYTE       | (VT52PARSE_STATE_COLLECT           << 4),
/*53 */  VT52PARSE_ACTION_COLLECT_BYTE       | (VT52PARSE_STATE_COLLECT           << 4),
/*54 */  VT52PARSE_ACTION_COLLECT_BYTE       | (VT52PARSE_STATE_COLLECT           << 4),
/*55 */  VT52PARSE_ACTION_COLLECT_BYTE       | (VT52PARSE_STATE_COLLECT           << 4),
/*56 */  VT52PARSE_ACTION_COLLECT_BYTE       | (VT52PARSE_STATE_COLLECT           << 4),
/*57 */  VT52PARSE_ACTION_COLLECT_BYTE       | (VT52PARSE_STATE_COLLECT           << 4),
/*58 */  VT52PARSE_ACTION_COLLECT_BYTE       | (VT52PARSE_STATE_COLLECT           << 4),
/*59 */  VT52PARSE_ACTION_COLLECT_BYTE       | (VT52PARSE_STATE_COLLECT           << 4),
/*60 */  VT52PARSE_ACTION_COLLECT_BYTE       | (VT52PARSE_STATE_COLLECT           << 4),
/*61 */  VT52PARSE_ACTION_COLLECT_BYTE       | (VT52PARSE_STATE_COLLECT           << 4),
/*62 */  VT52PARSE_ACTION_COLLECT_BYTE       | (VT52PARSE_STATE_COLLECT           << 4),
/*63 */  VT52PARSE_ACTION_COLLECT_BYTE       | (VT52PARSE_STATE_COLLECT           << 4),
/*64 */  VT52PARSE_ACTION_COLLECT_BYTE       | (VT52PARSE_STATE_COLLECT           << 4),
/*65 */  VT52PARSE_ACTION_COLLECT_BYTE       | (VT52PARSE_STATE_COLLECT           << 4),
/*66 */  VT52PARSE_ACTION_COLLECT_BYTE       | (VT52PARSE_STATE_COLLECT           << 4),
/*67 */  VT52PARSE_ACTION_COLLECT_BYTE       | (VT52PARSE_STATE_COLLECT           << 4),
/*68 */  VT52PARSE_ACTION_COLLECT_BYTE       | (VT52PARSE_STATE_COLLECT           << 4),
/*69 */  VT52PARSE_ACTION_COLLECT_BYTE       | (VT52PARSE_STATE_COLLECT           << 4),
/*70 */  VT52PARSE_ACTION_COLLECT_BYTE       | (VT52PARSE_STATE_COLLECT           << 4),
/*71 */  VT52PARSE_ACTION_COLLECT_BYTE       | (VT52PARSE_STATE_COLLECT           << 4),
/*72 */  VT52PARSE_ACTION_COLLECT_BYTE       | (VT52PARSE_STATE_COLLECT           << 4),
/*73 */  VT52PARSE_ACTION_COLLECT_BYTE       | (VT52PARSE_STATE_COLLECT           << 4),
/*74 */  VT52PARSE_ACTION_COLLECT_BYTE       | (VT52PARSE_STATE_COLLECT           << 4),
/*75 */  VT52PARSE_ACTION_COLLECT_BYTE       | (VT52PARSE_STATE_COLLECT           << 4),
/*76 */  VT52PARSE_ACTION_COLLECT_BYTE       | (VT52PARSE_STATE_COLLECT           << 4),
/*77 */  VT52PARSE_ACTION_COLLECT_BYTE       | (VT52PARSE_STATE_COLLECT           << 4),
/*78 */  VT52PARSE_ACTION_COLLECT_BYTE       | (VT52PARSE_STATE_COLLECT           << 4),
/*79 */  VT52PARSE_ACTION_COLLECT_BYTE       | (VT52PARSE_STATE_COLLECT           << 4),
/*80 */  VT52PARSE_ACTION_COLLECT_BYTE       | (VT52PARSE_STATE_COLLECT           << 4),
/*81 */  VT52PARSE_ACTION_COLLECT_BYTE       | (VT52PARSE_STATE_COLLECT           << 4),
/*82 */  VT52PARSE_ACTION_COLLECT_BYTE       | (VT52PARSE_STATE_COLLECT           << 4),
/*83 */  VT52PARSE_ACTION_COLLECT_BYTE       | (VT52PARSE_STATE_COLLECT           << 4),
/*84 */  VT52PARSE_ACTION_COLLECT_BYTE       | (VT52PARSE_STATE_COLLECT           << 4),
/*85 */  VT52PARSE_ACTION_COLLECT_BYTE       | (VT52PARSE_STATE_COLLECT           << 4),
/*86 */  VT52PARSE_ACTION_COLLECT_BYTE       | (VT52PARSE_STATE_COLLECT           << 4),
/*87 */  VT52PARSE_ACTION_COLLECT_BYTE       | (VT52PARSE_STATE_COLLECT           << 4),
/*88 */  VT52PARSE_ACTION_COLLECT_BYTE       | (VT52PARSE_STATE_COLLECT           << 4),
/*89 */  VT52PARSE_ACTION_COLLECT_BYTE       | (VT52PARSE_STATE_COLLECT           << 4),
/*90 */  VT52PARSE_ACTION_COLLECT_BYTE       | (VT52PARSE_STATE_COLLECT           << 4),
/*91 */  VT52PARSE_ACTION_COLLECT_BYTE       | (VT52PARSE_STATE_COLLECT           << 4),
/*92 */  VT52PARSE_ACTION_COLLECT_BYTE       | (VT52PARSE_STATE_COLLECT           << 4),
/*93 */  VT52PARSE_ACTION_COLLECT_BYTE       | (VT52PARSE_STATE_COLLECT           << 4),
/*94 */  VT52PARSE_ACTION_COLLECT_BYTE       | (VT52PARSE_STATE_COLLECT           << 4),
/*95 */  VT52PARSE_ACTION_COLLECT_BYTE       | (VT52PARSE_STATE_COLLECT           << 4),
/*96 */  VT52PARSE_ACTION_COLLECT_BYTE       | (VT52PARSE_STATE_COLLECT           << 4),
/*97 */  VT52PARSE_ACTION_COLLECT_BYTE       | (VT52PARSE_STATE_COLLECT           << 4),
/*98 */  VT52PARSE_ACTION_COLLECT_BYTE       | (VT52PARSE_STATE_COLLECT           << 4),
/*99 */  VT52PARSE_ACTION_COLLECT_BYTE       | (VT52PARSE_STATE_COLLECT           << 4),
/*100*/  VT52PARSE_ACTION_COLLECT_BYTE       | (VT52PARSE_STATE_COLLECT           << 4),
/*101*/  VT52PARSE_ACTION_COLLECT_BYTE       | (VT52PARSE_STATE_COLLECT           << 4),
/*102*/  VT52PARSE_ACTION_COLLECT_BYTE       | (VT52PARSE_STATE_COLLECT           << 4),
/*103*/  VT52PARSE_ACTION_COLLECT_BYTE       | (VT52PARSE_STATE_COLLECT           << 4),
/*104*/  VT52PARSE_ACTION_COLLECT_BYTE       | (VT52PARSE_STATE_COLLECT           << 4),
/*105*/  VT52PARSE_ACTION_COLLECT_BYTE       | (VT52PARSE_STATE_COLLECT           << 4),
/*106*/  VT52PARSE_ACTION_COLLECT_BYTE       | (VT52PARSE_STATE_COLLECT           << 4),
/*107*/  VT52PARSE_ACTION_COLLECT_BYTE       | (VT52PARSE_STATE_COLLECT           << 4),
/*108*/  VT52PARSE_ACTION_COLLECT_BYTE       | (VT52PARSE_STATE_COLLECT           << 4),
/*109*/  VT52PARSE_ACTION_COLLECT_BYTE       | (VT52PARSE_STATE_COLLECT           << 4),
/*110*/  VT52PARSE_ACTION_COLLECT_BYTE       | (VT52PARSE_STATE_COLLECT           << 4),
/*111*/  VT52PARSE_ACTION_COLLECT_BYTE       | (VT52PARSE_STATE_COLLECT           << 4),
/*112*/  VT52PARSE_ACTION_COLLECT_BYTE       | (VT52PARSE_STATE_COLLECT           << 4),
/*113*/  VT52PARSE_ACTION_COLLECT_BYTE       | (VT52PARSE_STATE_COLLECT           << 4),
/*114*/  VT52PARSE_ACTION_COLLECT_BYTE       | (VT52PARSE_STATE_COLLECT           << 4),
/*115*/  VT52PARSE_ACTION_COLLECT_BYTE       | (VT52PARSE_STATE_COLLECT           << 4),
/*116*/  VT52PARSE_ACTION_COLLECT_BYTE       | (VT52PARSE_STATE_COLLECT           << 4),
/*117*/  VT52PARSE_ACTION_COLLECT_BYTE       | (VT52PARSE_STATE_COLLECT           << 4),
/*118*/  VT52PARSE_ACTION_COLLECT_BYTE       | (VT52PARSE_STATE_COLLECT           << 4),
/*119*/  VT52PARSE_ACTION_COLLECT_BYTE       | (VT52PARSE_STATE_COLLECT           << 4),
/*120*/  VT52PARSE_ACTION_COLLECT_BYTE       | (VT52PARSE_STATE_COLLECT           << 4),
/*121*/  VT52PARSE_ACTION_COLLECT_BYTE       | (VT52PARSE_STATE_COLLECT           << 4),
/*122*/  VT52PARSE_ACTION_COLLECT_BYTE       | (VT52PARSE_STATE_COLLECT           << 4),
/*123*/  VT52PARSE_ACTION_COLLECT_BYTE       | (VT52PARSE_STATE_COLLECT           << 4),
/*124*/  VT52PARSE_ACTION_COLLECT_BYTE       | (VT52PARSE_STATE_COLLECT           << 4),
/*125*/  VT52PARSE_ACTION_COLLECT_BYTE       | (VT52PARSE_STATE_COLLECT           << 4),
/*126*/  VT52PARSE_ACTION_COLLECT_BYTE       | (VT52PARSE_STATE_COLLECT           << 4),
/*127*/  VT52PARSE_ACTION_IGNORE             | (VT52PARSE_STATE_COLLECT           << 4),
/*128*/  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*129*/  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*130*/  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*131*/  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*132*/  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*133*/  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*134*/  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*135*/  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*136*/  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*137*/  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*138*/  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*139*/  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*140*/  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*141*/  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*142*/  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*143*/  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*144*/  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*145*/  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*146*/  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*147*/  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*148*/  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*149*/  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*150*/  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*151*/  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*152*/  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*153*/  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*154*/  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*155*/  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*156*/  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*157*/  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*158*/  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
/*159*/  VT52PARSE_ACTION_EXECUTE            | (VT52PARSE_STATE_GROUND            << 4),
  }
};

void vt52parse_init(vt52parse_t *parser, vt52parse_callback_t cb, void* user_data)
{
    vt52parse_reset(parser);
    parser->cb        = cb;
    parser->user_data = user_data;
}

void vt52parse_reset(vt52parse_t *parser)
{
    parser->state                       = VT52PARSE_STATE_GROUND;
    parser->num_params                  = 0;
    parser->esc_code_seen               = 0;
    parser->num_params_to_collect       = 0;
    parser->is_atari_extensions_enabled = 0;
}

void vt52parse_do_state_change(vt52parse_t *parser, unsigned char ch)
{
    const vt52_state_change_t change = VT52_STATE_TABLE[parser->state-1][ch];
    vt52parse_state_t  new_state = STATE(change);
    vt52parse_action_t action    = ACTION(change);

    switch(action) {
        case VT52PARSE_ACTION_PRINT:
        case VT52PARSE_ACTION_EXECUTE:
        case VT52PARSE_ACTION_ESC_DISPATCH:
            parser->cb(parser->user_data, action, ch);
            break;

        case VT52PARSE_ACTION_ESC_START:
            parser->num_params = 0;
            break;

        case VT52PARSE_ACTION_ESC_DELAY_DISPATCH:
            switch (ch) {
                case 'Y':
                    parser->num_params_to_collect = 2;
                    break;

                case 'b':
                case 'c':
                    parser->num_params_to_collect = (parser->is_atari_extensions_enabled) ? 1 : 0;
                    break;

                default:
                    parser->num_params_to_collect = 0;
                    break;
            }

            if (parser->num_params_to_collect > 0) {
                parser->esc_code_seen = ch;
            }
            else {
                parser->cb(parser->user_data, VT52PARSE_ACTION_ESC_DISPATCH, ch);
                new_state = VT52PARSE_STATE_GROUND;
            }
            break;

        case VT52PARSE_ACTION_COLLECT_BYTE:
            parser->params[parser->num_params++] = ch;

            if (parser->num_params == parser->num_params_to_collect) {
                parser->cb(parser->user_data, VT52PARSE_ACTION_ESC_DISPATCH, parser->esc_code_seen);
                new_state = VT52PARSE_STATE_GROUND;
            }
            break;

        default:
            parser->cb(parser->user_data, VT52PARSE_ACTION_ERROR, 0);
            break;
    }

    parser->state = new_state;
}
